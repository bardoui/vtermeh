@use "sass:math";
@use "@bardoui/termeh/termeh.scss" as T;
@forward "@bardoui/termeh/form/input.scss";

$-gaps: T.var("input", "gaps", ());
$-width: T.var("file-upload", "width", 4em);
$-height: T.var("file-upload", "height", 4em);

.v-file-upload {
    @include T.unselectable();
    padding: T.gap("element");
    position: relative;

    .v-file-thumbnails {
        display: flex;
        width: $-width + 1em;
        height: $-height;
        position: relative;
        cursor: help;
        align-items: center;
        justify-content: center;
        z-index: 0;

        > img {
            width: $-width;
            height: $-height;
            object-fit: cover;
            position: absolute;

            &:nth-child(1) {
                z-index: 3;
                height: $-height;
                @include T.ltr() {
                    right: 1em;
                }
                @include T.rtl() {
                    left: 1em;
                }
            }

            &:nth-child(2) {
                z-index: 2;
                height: $-height - 0.5em;
                opacity: 0.75;
                @include T.ltr() {
                    right: 0.5em;
                }
                @include T.rtl() {
                    left: 0.5em;
                }
            }

            &:nth-child(3) {
                z-index: 1;
                height: $-height - 1em;
                opacity: 0.5;
                @include T.ltr() {
                    right: 0;
                }
                @include T.rtl() {
                    left: 0;
                }
            }
        }
    }

    > label {
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        cursor: pointer;
        z-index: 4;
        transition: all T.transition-params();
    }

    > input {
        opacity: 0;
        visibility: hidden;
        position: absolute;
        left: 0;
        top: 0;
        width: 1em;
    }

    &:hover {
        > label {
            background: rgba(T.color("separator"), 0.2);
        }
    }

    @each $name, $gap in T.gaps($-gaps) {
        &.is-#{$name}-padded {
            padding: $gap;
        }
    }
}
